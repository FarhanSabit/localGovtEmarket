<%- include('partials/header') %>
<!-- Begin Card -->
<div class="card w-100">
  <div class="card-body">
    <div class="col-lg-12">
      <div class="row d-flex align-items-center justify-content-between">
        <div class="col-md-8">
          <h4 class="card-title">Member List </h4>
        </div>
        <div class="col-md-4 d-flex justify-content-end">
          <a href="/addMember" class="btn btn-primary btn-sm" role="button">
            <i class="ti-user"></i>                      
            Add Member
          </a>
        </div>
      </div>    

    <!-- Search Box and Table -->
    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <label for="tableSearch">Search Members:</label>
          <input type="text" id="tableSearch" class="form-control" placeholder="Search for a supplier...">
        </div>
      </div>
    </div>

    <!-- Export Options -->
    <div class="d-flex justify-content-between pt-3">
      <button class="btn btn-secondary btn-sm" id="exportCSV">Export to CSV</button>
      <button class="btn btn-secondary btn-sm" id="exportExcel">Export to Excel</button>
      <button class="btn btn-secondary btn-sm" id="exportPDF">Export to PDF</button>
    </div>  
    <div class="table-responsive pt-3">
      <table class="table table-bordered" id="membersTable">
        <thead>
          <tr>
            <th>#</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>NIN</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Gender</th>
            <th>F/Type</th>
            <th>F/No</th>
            <th>Occupation</th>
            <th>Issued Card</th>
            <th>QR</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% let counter = 1; %> <!-- Initialize counter variable -->
          <% members.forEach(member => { %>
          <tr>              
            <td><%= counter++ %></td> <!-- Auto-increasing number -->
            <td><%= member.f_name %></td>
            <td><%= member.l_name %></td>
            <td><%= member.nin %></td>
            <td><%= member.email %></td>
            <td><%= member.phone_no %></td>
            <td><%= member.gender %></td>
            <td><%= member.floor_type %></td>
            <td><%= member.shop_no %></td>
            <td><%= member.occupation %></td>
            <td><%= member.issued_card %></td>
            <td><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50">
              <rect x="0" y="0" width="50" height="50" fill="#ffffff"></rect><g transform="scale(2.381)">
                <g transform="translate(0,0)"><path fill-rule="evenodd" d="M8 0L8 1L9 1L9 2L8 2L8 5L11 5L11 4L12 4L12 3L13 3L13 0L12 0L12 3L11 3L11 2L10 2L10 0ZM9 2L9 4L11 4L11 3L10 3L10 2ZM8 6L8 7L9 7L9 8L8 8L8 9L7 9L7 8L6 8L6 9L7 9L7 10L5 10L5 9L4 9L4 8L0 8L0 9L1 9L1 10L0 10L0 11L2 11L2 12L1 12L1 13L4 13L4 11L5 11L5 13L8 13L8 14L9 14L9 17L8 17L8 21L9 21L9 20L10 20L10 21L13 21L13 19L14 19L14 20L15 20L15 21L16 21L16 20L18 20L18 19L19 19L19 21L20 21L20 20L21 20L21 19L19 19L19 18L20 18L20 17L21 17L21 15L20 15L20 14L19 14L19 13L17 13L17 12L16 12L16 13L15 13L15 14L14 14L14 11L17 11L17 10L18 10L18 12L19 12L19 11L20 11L20 12L21 12L21 8L20 8L20 10L19 10L19 8L16 8L16 9L15 9L15 10L13 10L13 9L14 9L14 8L13 8L13 9L12 9L12 12L11 12L11 13L12 13L12 12L13 12L13 15L11 15L11 14L9 14L9 12L8 12L8 11L10 11L10 10L11 10L11 6L10 6L10 7L9 7L9 6ZM12 6L12 7L13 7L13 6ZM9 8L9 9L10 9L10 8ZM16 9L16 10L17 10L17 9ZM2 10L2 11L4 11L4 10ZM7 10L7 11L6 11L6 12L7 12L7 11L8 11L8 10ZM16 13L16 14L15 14L15 17L14 17L14 16L12 16L12 17L11 17L11 15L10 15L10 17L9 17L9 18L10 18L10 20L11 20L11 18L12 18L12 19L13 19L13 17L14 17L14 19L15 19L15 20L16 20L16 17L17 17L17 19L18 19L18 18L19 18L19 17L20 17L20 15L19 15L19 14L17 14L17 13ZM16 14L16 15L17 15L17 16L18 16L18 15L17 15L17 14ZM0 0L0 7L7 7L7 0ZM1 1L1 6L6 6L6 1ZM2 2L2 5L5 5L5 2ZM14 0L14 7L21 7L21 0ZM15 1L15 6L20 6L20 1ZM16 2L16 5L19 5L19 2ZM0 14L0 21L7 21L7 14ZM1 15L1 20L6 20L6 15ZM2 16L2 19L5 19L5 16Z" fill="#000000">
                </path></g></g></svg></td>
            <td>
              <a href="/membersProfile/<%= member.id %>" class="btn btn-success btn-xs"><i class="fas fa-view"></i> View</a>
              <a href="/editMember/<%= member.id %>" class="btn btn-warning btn-xs"><i class="fas fa-edit"></i> Edit</a>
              <a href="/deleteMembers/<%= member.id %>" class="btn btn-danger btn-xs"><i class="fas fa-trash"></i> Delete</a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    <div class="pt-3">
      <ul class="pagination justify-content-center" id="pagination"></ul>
    </div>
  </div>
</div>
<%- include('partials/footer') %>
<%- include('partials/tableProperties', {
  table_id: 'membersTable'
}) %>
